# [Diamond V] 연금술 - 12797 

[문제 링크](https://www.acmicpc.net/problem/12797) 

### 성능 요약

메모리: 17908 KB, 시간: 232 ms

### 분류

벌래캠프–매시(berlekamp_massey), 다이나믹 프로그래밍(dp), 분할 정복을 이용한 거듭제곱(exponentiation_by_squaring), 수학(math)

### 문제 설명

<p>cubelover가 세상에서 가장 위대한 연금술사라는 것은 잘 알려진 사실입니다. 그는 다음과 같은 과정을 통해 재료를 조합합니다.</p>

<ol>
	<li>가마에 슬라임의 체액을 가득 채우고 불로 가열합니다.</li>
	<li>재료를 하나 넣고 시계방향으로 4번, 반시계방향으로 2번 천천히 저어줍니다.</li>
	<li>동쪽을 향해 기도를 올립니다.</li>
	<li>2와 3을 재료를 다 넣을 때까지 반복합니다.</li>
	<li>불을 끄고 17시간동안 식혀 완성합니다.</li>
</ol>

<p>놀랍게도, cubelover의 가마로 만든 완성품은 재료를 넣는 순서와 상관이 없습니다. 하지만 넣는 재료가 다르면 항상 다른 완성품이 나옵니다. 또한 cubelover는 오랜 기간의 경험을 통해서, 완성품의 품질은 넣은 재료의 품질을 모두 곱한 것과 같다는 것을 발견했습니다.</p>

<p>예를 들어 재료로 도마뱀의 꼬리와 요정의 날개를 사용하고, 도마뱀의 꼬리는 품질이 2이고 요정의 날개는 품질이 3이라고 해 봅시다. 도마뱀의 꼬리 -> 요정의 날개 -> 도마뱀의 꼬리 순서로 재료를 넣었더니 사과 주스가 나왔다고 하면, 사과 주스의 품질은 2 * 3 * 2 = 12 가 됩니다. 또한 재료를 넣는 순서는 완성품과 상관이 없으므로, 요정의 날개 -> 도마뱀의 꼬리 -> 도마뱀의 꼬리 순서로 재료를 넣어도 사과 주스가 나옵니다.</p>

<p>cubelover는 오늘 <em>n</em>개의 재료를 조합하려고 합니다. 그의 창고에는 <em>m</em>종류의 재료가 있고, 각 재료의 품질은 <em>a<sub>1</sub></em>, <em>a<sub>2</sub></em>, ..., <em>a<sub>m</sub></em> 으로 서로 다릅니다. 문득 cubelover는 조합해서 나올 수 있는 모든 가능한 완성품의 품질의 합이 궁금해졌지만, 가능한 완성품이 너무 많아 구하지 못했습니다. 그는 당신이 대신 구해준다면 Coder's High 푼 문제수를 하나 늘려주겠다고 제안했습니다.</p>

### 입력 

 <p>첫 줄에 정수 <em>n</em>과 <em>m</em>(1 ≤ <em>n</em> ≤ 10<sup>9</sup>, 1 ≤ <em>m</em> ≤ 10<sup>3</sup>)이 공백으로 구분되어 두고 주어진다. 다음 줄에 <em>a<sub>1</sub></em>, <em>a<sub>2</sub></em>, ..., <em>a<sub>m</sub></em> (1 ≤ <em>a<sub>i</sub></em> ≤ 10<sup>9</sup>)이 공백으로 구분되어 주어진다.</p>

### 출력 

 <p>첫 줄에 답을 1,000,000,007 로 나눈 나머지를 출력한다.</p>

